{"ast":null,"code":"import { call, put, takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { TodoActionTypes } from \"state/todos/TodoActions\";\nimport { crudAPI } from \"components/Constants\";\nfunction* fetchTodosSaga() {\n  try {\n    const response = yield call(axios.get, crudAPI);\n    const todos = response.data;\n    yield put({\n      type: TodoActionTypes.FETCH_TODOS_SUCCESS,\n      payload: {\n        todos\n      }\n    });\n  } catch (error) {\n    yield put({\n      type: TodoActionTypes.FETCH_TODOS_FAILURE,\n      payload: {\n        error: error.message\n      }\n    });\n  }\n}\nfunction* watchFetchTodos() {\n  yield takeLatest(TodoActionTypes.FETCH_TODOS_REQUEST, fetchTodosSaga);\n}\nfunction* deleteTodoSaga(action) {\n  try {\n    console.log(\"Fgdf\");\n    const {\n      id\n    } = action.payload;\n    yield call(axios.delete, `${crudAPI}/${id}`);\n    yield put({\n      type: TodoActionTypes.DELETE_TODO_SUCCESS,\n      payload: {\n        id\n      }\n    });\n  } catch (error) {\n    yield put({\n      type: TodoActionTypes.DELETE_TODO_FAILURE,\n      payload: {\n        error: error.message\n      }\n    });\n  }\n  function* watchDeleteTodo() {\n    yield takeLatest(TodoActionTypes.DELETE_TODO_REQUEST, deleteTodoSaga);\n  }\n  function* updateTodoSaga(action) {\n    try {\n      const {\n        id,\n        updatedTodo\n      } = action.payload;\n      yield call(axios.put, `${crudAPI}/${id}`, updatedTodo, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      yield put({\n        type: TodoActionTypes.EDIT_TODO,\n        payload: {\n          id,\n          updatedTodo\n        }\n      });\n    } catch (error) {}\n  }\n}\nfunction* watchUpdateTodo() {\n  yield takeLatest(TodoActionTypes.EDIT_TODO, updateTodoSaga);\n}\nexport function* todoSagas() {\n  yield watchFetchTodos();\n  yield watchDeleteTodo();\n  yield watchUpdateTodo();\n}\n// End of File (EOF)","map":{"version":3,"names":["call","put","takeLatest","axios","TodoActionTypes","crudAPI","fetchTodosSaga","response","get","todos","data","type","FETCH_TODOS_SUCCESS","payload","error","FETCH_TODOS_FAILURE","message","watchFetchTodos","FETCH_TODOS_REQUEST","deleteTodoSaga","action","console","log","id","delete","DELETE_TODO_SUCCESS","DELETE_TODO_FAILURE","watchDeleteTodo","DELETE_TODO_REQUEST","updateTodoSaga","updatedTodo","headers","EDIT_TODO","watchUpdateTodo","todoSagas"],"sources":["/home/mergestack/todoapp/src/state/todos/Sagas.tsx"],"sourcesContent":["\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { TodoActionTypes } from \"state/todos/TodoActions\"\nimport { Todo, crudAPI } from \"components/Constants\";\n\nfunction* fetchTodosSaga(): any {\n  try {\n    const response = yield call(axios.get, crudAPI);\n    const todos: Todo[] = response.data;\n    yield put({ type: TodoActionTypes.FETCH_TODOS_SUCCESS, payload: { todos } });\n  } catch (error: any) {\n    yield put({ type: TodoActionTypes.FETCH_TODOS_FAILURE, payload: { error: error.message } });\n  }\n}\n\nfunction* watchFetchTodos() {\n  yield takeLatest(TodoActionTypes.FETCH_TODOS_REQUEST, fetchTodosSaga);\n}\nfunction* deleteTodoSaga(action: { type: string, payload: { id: string } }) {\n  try {\n    console.log(\"Fgdf\")\n    const { id } = action.payload;\n    yield call(axios.delete, `${crudAPI}/${id}`);\n    yield put({ type: TodoActionTypes.DELETE_TODO_SUCCESS, payload: { id } });\n  } catch (error: any) {\n    yield put({ type: TodoActionTypes.DELETE_TODO_FAILURE, payload: { error: error.message } });\n  }\n\n  function* watchDeleteTodo() {\n    yield takeLatest(TodoActionTypes.DELETE_TODO_REQUEST, deleteTodoSaga);\n  }\n  function* updateTodoSaga(action: { type: string, payload: { id: string, updatedTodo: Partial<Todo> } }) {\n    try {\n      const { id, updatedTodo } = action.payload;\n      yield call(axios.put, `${crudAPI}/${id}`, updatedTodo, {\n        headers: { 'Content-Type': 'application/json' }\n      });\n      yield put({ type: TodoActionTypes.EDIT_TODO, payload: { id, updatedTodo } });\n    } catch (error: any) {\n    }\n  }\n}\n\nfunction* watchUpdateTodo() {\n  yield takeLatest(TodoActionTypes.EDIT_TODO, updateTodoSaga);\n}\n\n\nexport function* todoSagas() {\n  yield watchFetchTodos();\n  yield watchDeleteTodo();\n  yield watchUpdateTodo();\n}\n// End of File (EOF)\n"],"mappings":"AACA,SAASA,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAQ,oBAAoB;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAAeC,OAAO,QAAQ,sBAAsB;AAEpD,UAAUC,cAAcA,CAAA,EAAQ;EAC9B,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMP,IAAI,CAACG,KAAK,CAACK,GAAG,EAAEH,OAAO,CAAC;IAC/C,MAAMI,KAAa,GAAGF,QAAQ,CAACG,IAAI;IACnC,MAAMT,GAAG,CAAC;MAAEU,IAAI,EAAEP,eAAe,CAACQ,mBAAmB;MAAEC,OAAO,EAAE;QAAEJ;MAAM;IAAE,CAAC,CAAC;EAC9E,CAAC,CAAC,OAAOK,KAAU,EAAE;IACnB,MAAMb,GAAG,CAAC;MAAEU,IAAI,EAAEP,eAAe,CAACW,mBAAmB;MAAEF,OAAO,EAAE;QAAEC,KAAK,EAAEA,KAAK,CAACE;MAAQ;IAAE,CAAC,CAAC;EAC7F;AACF;AAEA,UAAUC,eAAeA,CAAA,EAAG;EAC1B,MAAMf,UAAU,CAACE,eAAe,CAACc,mBAAmB,EAAEZ,cAAc,CAAC;AACvE;AACA,UAAUa,cAAcA,CAACC,MAAiD,EAAE;EAC1E,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnB,MAAM;MAAEC;IAAG,CAAC,GAAGH,MAAM,CAACP,OAAO;IAC7B,MAAMb,IAAI,CAACG,KAAK,CAACqB,MAAM,EAAG,GAAEnB,OAAQ,IAAGkB,EAAG,EAAC,CAAC;IAC5C,MAAMtB,GAAG,CAAC;MAAEU,IAAI,EAAEP,eAAe,CAACqB,mBAAmB;MAAEZ,OAAO,EAAE;QAAEU;MAAG;IAAE,CAAC,CAAC;EAC3E,CAAC,CAAC,OAAOT,KAAU,EAAE;IACnB,MAAMb,GAAG,CAAC;MAAEU,IAAI,EAAEP,eAAe,CAACsB,mBAAmB;MAAEb,OAAO,EAAE;QAAEC,KAAK,EAAEA,KAAK,CAACE;MAAQ;IAAE,CAAC,CAAC;EAC7F;EAEA,UAAUW,eAAeA,CAAA,EAAG;IAC1B,MAAMzB,UAAU,CAACE,eAAe,CAACwB,mBAAmB,EAAET,cAAc,CAAC;EACvE;EACA,UAAUU,cAAcA,CAACT,MAA6E,EAAE;IACtG,IAAI;MACF,MAAM;QAAEG,EAAE;QAAEO;MAAY,CAAC,GAAGV,MAAM,CAACP,OAAO;MAC1C,MAAMb,IAAI,CAACG,KAAK,CAACF,GAAG,EAAG,GAAEI,OAAQ,IAAGkB,EAAG,EAAC,EAAEO,WAAW,EAAE;QACrDC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB;MAChD,CAAC,CAAC;MACF,MAAM9B,GAAG,CAAC;QAAEU,IAAI,EAAEP,eAAe,CAAC4B,SAAS;QAAEnB,OAAO,EAAE;UAAEU,EAAE;UAAEO;QAAY;MAAE,CAAC,CAAC;IAC9E,CAAC,CAAC,OAAOhB,KAAU,EAAE,CACrB;EACF;AACF;AAEA,UAAUmB,eAAeA,CAAA,EAAG;EAC1B,MAAM/B,UAAU,CAACE,eAAe,CAAC4B,SAAS,EAAEH,cAAc,CAAC;AAC7D;AAGA,OAAO,UAAUK,SAASA,CAAA,EAAG;EAC3B,MAAMjB,eAAe,CAAC,CAAC;EACvB,MAAMU,eAAe,CAAC,CAAC;EACvB,MAAMM,eAAe,CAAC,CAAC;AACzB;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}